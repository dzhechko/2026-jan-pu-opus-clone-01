# Обзор пользовательского интерфейса КлипМейкер

## Содержание

1. [Общая структура интерфейса](#1-общая-структура-интерфейса)
2. [Навигация и Layout дашборда](#2-навигация-и-layout-дашборда)
3. [Дашборд -- главная страница (/dashboard)](#3-дашборд----главная-страница-dashboard)
4. [Список видео и пагинация](#4-список-видео-и-пагинация)
5. [Страница видео -- клипы (/dashboard/videos/[id])](#5-страница-видео----клипы-dashboardvideosid)
6. [Редактор клипов (/dashboard/videos/[id]/clips/[id]/edit)](#6-редактор-клипов)
7. [Загрузка видео (/dashboard/upload)](#7-загрузка-видео-dashboardupload)
8. [Аналитика (/dashboard/analytics)](#8-аналитика-dashboardanalytics)
9. [Настройки -- профиль и AI-провайдер (/dashboard/settings)](#9-настройки----профиль-и-ai-провайдер-dashboardsettings)
10. [Тарифы и оплата (/dashboard/billing)](#10-тарифы-и-оплата-dashboardbilling)
11. [Платформы для публикации (/dashboard/settings/platforms)](#11-платформы-для-публикации-dashboardsettingsplatforms)
12. [Командная работа (/dashboard/team)](#12-командная-работа-dashboardteam)
13. [API-ключи BYOK (/dashboard/settings/api-keys)](#13-api-ключи-byok-dashboardsettingsapi-keys)
14. [Скелетоны загрузки (Loading Skeletons)](#14-скелетоны-загрузки-loading-skeletons)
15. [Адаптивный дизайн и отзывчивость](#15-адаптивный-дизайн-и-отзывчивость)

---

## 1. Общая структура интерфейса

Интерфейс КлипМейкер построен на **Next.js 15 App Router** с компонентами **shadcn/ui** и стилизацией **Tailwind CSS**. Приложение разделено на два layout-слоя:

- **(auth)** -- авторизация: вход, регистрация, восстановление пароля, подтверждение email
- **(dashboard)** -- основной рабочий интерфейс, все страницы после авторизации

### Технологический стек UI

| Компонент | Технология | Назначение |
|-----------|-----------|-----------|
| Фреймворк | Next.js 15 (App Router) | SSR + CSR, маршрутизация |
| UI-библиотека | React 19 | Компоненты |
| Компоненты | shadcn/ui | Button, Card, Badge, Separator |
| Стилизация | Tailwind CSS | Утилитарные CSS-классы |
| Иконки | Lucide React | VideoIcon, SettingsIcon и др. |
| Состояние (сервер) | React Query (TanStack Query) | Кеширование tRPC-ответов |
| Состояние (клиент) | Zustand | Глобальное клиентское состояние |
| Валидация | Zod | Типобезопасная валидация форм |
| API | tRPC | Типобезопасные RPC-вызовы |

### Полная карта страниц

```
/                                          -- Лендинг (SSR, публичная)
|
+-- /login                                 -- Вход (email + VK OAuth)
+-- /register                              -- Регистрация
+-- /forgot-password                       -- Восстановление пароля
+-- /reset-password                        -- Сброс пароля (по ссылке из email)
+-- /verify-email                          -- Подтверждение email
+-- /invite                                -- Принятие приглашения в команду
|
+-- /dashboard                             -- Главная: карточки статистики + список видео
    +-- /dashboard/upload                  -- Загрузка видео (drag & drop + URL)
    +-- /dashboard/analytics               -- Аналитика публикаций
    +-- /dashboard/billing                 -- Тарифы, оплата, подписка
    +-- /dashboard/team                    -- Управление командой
    +-- /dashboard/settings                -- Профиль + AI-провайдер + ссылки
    |   +-- /dashboard/settings/platforms  -- Подключение платформ (VK, Rutube, Дзен, TG)
    |   +-- /dashboard/settings/api-keys   -- BYOK API-ключи (Gemini, OpenAI, Anthropic, OpenRouter)
    +-- /dashboard/videos/[videoId]        -- Детали видео + карточки клипов + транскрипт
        +-- /dashboard/videos/[videoId]/clips/[clipId]/edit
                                           -- Редактор клипа (таймлайн, субтитры, метаданные)
```

### Страницы авторизации

| Страница | Маршрут | Описание |
|----------|---------|----------|
| Вход | `/login` | Email + пароль, VK OAuth, ссылка "Забыли пароль?" |
| Регистрация | `/register` | Email + пароль (мин. 8 символов), VK OAuth |
| Верификация email | `/verify-email` | Автоматическое подтверждение по ссылке из письма |
| Восстановление пароля | `/forgot-password` | Ввод email для получения ссылки сброса |
| Сброс пароля | `/reset-password` | Форма нового пароля (ссылка действует 1 час) |

```
+--------------------------------------+
|         КлипМейкер                   |
|                                      |
|  Email: [_________________]          |
|  Пароль: [________________]          |
|                                      |
|  [ Войти / Зарегистрироваться ]      |
|                                      |
|  --- или ---                         |
|                                      |
|  [ Войти через VK ]                  |
|                                      |
|  Забыли пароль?  /  Уже есть аккаунт?|
+--------------------------------------+
```

---

## 2. Навигация и Layout дашборда

### Layout дашборда

Серверный layout (`apps/web/app/(dashboard)/layout.tsx`) проверяет JWT-авторизацию по заголовкам `x-user-id`, `x-user-email`, `x-user-plan`. При отсутствии авторизации -- redirect на `/login`.

```
+------------------------------------------------------------------+
| КлипМейкер   Видео  Загрузить  Аналитика  Команда  [user@..] [cog] [exit] |
+------------------------------------------------------------------+
|                                                                  |
|                    Основная область контента                     |
|                    (container mx-auto px-4 py-8)                 |
|                                                                  |
|                    Фон страницы: bg-gray-50                      |
|                                                                  |
+------------------------------------------------------------------+
```

### Верхняя навигация (DashboardNav)

Горизонтальная панель (`border-b bg-white`, высота `h-16`) с элементами:

| Элемент | Иконка (Lucide) | Маршрут | Описание |
|---------|-----------------|---------|----------|
| Логотип "КлипМейкер" | -- | `/dashboard` | Переход на главную, `text-lg font-bold` |
| Видео | `VideoIcon` | `/dashboard` | Список загруженных видео |
| Загрузить | `UploadIcon` | `/dashboard/upload` | Загрузка нового видео |
| Аналитика | `BarChart3Icon` | `/dashboard/analytics` | Статистика публикаций |
| Команда | `UsersIcon` | `/dashboard/team` | Управление командой |
| Email | -- | -- | Отображение email текущего пользователя |
| Настройки | `SettingsIcon` | `/dashboard/settings` | Переход в настройки |
| Выход | `LogOutIcon` | -- | POST `/api/auth/logout`, redirect на `/login` |

Все ссылки стилизованы как `text-sm text-gray-500 hover:text-gray-900` с иконками 16x16 (`h-4 w-4`).

**Файл:** `apps/web/components/layout/dashboard-nav.tsx`

---

## 3. Дашборд -- главная страница (/dashboard)

**Рендеринг:** Server Component (данные загружаются через Prisma на сервере)

```
+------------------------------------------------------------------+
|  Дашборд (h1, text-2xl font-bold)                                |
|                                                                  |
|  +-- StatsGrid (grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4) |
|  +----------+  +----------+  +----------+  +----------+          |
|  | Всего    |  | Всего    |  | Минуты   |  | Период   |          |
|  | видео    |  | клипов   |  | 85/120   |  | оплаты   |          |
|  | 12       |  | 42       |  | [=====]  |  | до 15.03 |          |
|  +----------+  +----------+  +----------+  +----------+          |
|                                                                  |
|  +-- VideoList (или EmptyState, если нет видео) ---------+       |
|  +------+----------------------------+---------+-----+---+       |
|  |[thumb]| Вебинар: Продажи в 2026   |completed| 5 кл| 15.03|   |
|  |[thumb]| Мастер-класс маркетинг    |analyzing| --- | 14.03|   |
|  |[thumb]| Лекция по финансам        |completed| 8 кл| 13.03|   |
|  +------+----------------------------+---------+-----+---+       |
|                                                                  |
|  [< Назад]                              [Далее >]               |
+------------------------------------------------------------------+
```

### Компоненты дашборда

| Компонент | Файл | Назначение |
|-----------|------|-----------|
| `StatsGrid` | `components/dashboard/stats-grid.tsx` | Контейнер для 4 карточек статистики |
| `StatCard` | `components/dashboard/stat-card.tsx` | Карточка с числовым значением и иконкой |
| `MinutesCard` | `components/dashboard/minutes-card.tsx` | Прогресс-бар использования минут |
| `PlanBadge` | `components/dashboard/plan-badge.tsx` | Цветной бейдж текущего плана |
| `VideoList` | `components/dashboard/video-list.tsx` | Список видео с пагинацией |
| `VideoRow` | `components/dashboard/video-row.tsx` | Строка одного видео (ссылка на детали) |
| `VideoThumbnail` | `components/dashboard/video-thumbnail.tsx` | Миниатюра видео |
| `StatusBadge` | `components/dashboard/status-badge.tsx` | Цветной бейдж статуса обработки |
| `EmptyState` | `components/dashboard/empty-state.tsx` | Пустое состояние (нет видео) |
| `PaginationControls` | `components/dashboard/pagination-controls.tsx` | Кнопки "Назад" / "Далее" |

### Карточки статистики (StatsGrid)

Данные загружаются на сервере через Prisma:

| Карточка | Данные | Источник |
|----------|--------|----------|
| Всего видео | `videoCount` | `prisma.video.count()` |
| Всего клипов | `clipCount` | `prisma.clip.count()` |
| Использованные минуты | `minutesUsed / minutesLimit` | `user.minutesUsed`, `user.minutesLimit` |
| Период оплаты | дата окончания | `subscription.currentPeriodEnd` |

### Пустое состояние (EmptyState)

Отображается при `videoCount === 0`. Содержит иконку, приглашение загрузить первое видео и кнопку-ссылку на `/dashboard/upload`.

---

## 4. Список видео и пагинация

Список видео отображается на главной странице дашборда. Каждое видео -- строка-ссылка на `/dashboard/videos/[videoId]`.

### Поля строки видео (VideoRow)

| Поле | Описание |
|------|----------|
| Миниатюра | `VideoThumbnail` (из S3 или заглушка) |
| Название | `video.title` (усечение при длинных названиях) |
| Статус | `StatusBadge` -- цветной бейдж |
| Длительность | `durationSeconds` в формате MM:SS |
| Количество клипов | `_count.clips` |
| Дата создания | `createdAt` |

### Статус-бейджи видео (StatusBadge)

| Статус | Цвет | Текст | CSS |
|--------|------|-------|-----|
| `uploading` | Серый | Загрузка | `bg-gray-100 text-gray-700` |
| `downloading` | Серый | Скачивание | `bg-gray-100 text-gray-700` |
| `transcribing` | Синий | Транскрибация | `bg-blue-100 text-blue-700` |
| `analyzing` | Фиолетовый | Анализ | `bg-purple-100 text-purple-700` |
| `generating_clips` | Оранжевый | Генерация клипов | `bg-orange-100 text-orange-700` |
| `completed` | Зелёный | Завершено | `bg-green-100 text-green-700` |
| `failed` | Красный | Ошибка | `bg-red-100 text-red-700` |

### Пагинация

- 10 записей на страницу (`PAGE_SIZE = 10`)
- Максимум 10 000 страниц (`MAX_PAGE = 10000`)
- URL-параметр `?page=N`
- Кнопки "Назад" и "Далее" через компонент `PaginationControls`
- Серверный расчёт: `hasMore = videos.length > PAGE_SIZE`

---

## 5. Страница видео -- клипы (/dashboard/videos/[id])

**Рендеринг:** Server Component (проверка) + Client Component (`VideoDetail` с polling)

```
+------------------------------------------------------------------+
|  [< Назад]  Название видео                        [Удалить]      |
|  Длительность: 01:23:45 | Статус: completed                     |
|                                                                  |
|  +--------+  +--------+  +--------+  +--------+                 |
|  |[>play] |  |[>play] |  |[>play] |  |[>play] |                 |
|  | Клип 1 |  | Клип 2 |  | Клип 3 |  | Клип 4 |                 |
|  | 0:45   |  | 0:38   |  | 0:52   |  | 0:41   |                 |
|  | 78/100 |  | 72/100 |  | 65/100 |  | 58/100 |                 |
|  | CTA:.. |  | CTA:.. |  |        |  |        |                 |
|  |[Скачать]| |[Скачать]| |[Скачать]| |[Скачать]|                 |
|  |[Опубл.] | |[Опубл.] | |[Опубл.] | |[Опубл.] |               |
|  | VK [ok] | | TG[err] | |        |  |        |                 |
|  +--------+  +--------+  +--------+  +--------+                 |
|                                                                  |
|  [v] Транскрипт (сворачиваемый)                                 |
|  [0:00:00] И самое важное в продажах...                          |
|  [0:00:05] это правильный подход к клиенту.                      |
|  [0:00:12] Давайте разберём пять способов...                     |
+------------------------------------------------------------------+
```

### Заголовок видео (VideoHeader)

Содержит название, длительность, дату, статус-бейдж и кнопку "Удалить видео" (с подтверждением, каскадное удаление: S3-файлы + все клипы + публикации).

### Карточка клипа (ClipCard)

**Файл:** `apps/web/components/clips/clip-card.tsx`

Каждая карточка содержит:

**1. Область превью (соотношение 9:16):**
- Фон `bg-black`, соотношение `aspect-[9/16]`
- Миниатюра (`thumbnailUrl`) или текст "Preview"
- Кнопка воспроизведения (полупрозрачный круг) при наличии `videoUrl`
- Бейдж "Водяной знак" для Free-плана (клик ведёт на `/dashboard/billing`)
- Спиннер при статусе `rendering` (анимированный border `animate-spin`)
- По клику запускается HTML5 `<video>` с `autoPlay`, `controls`, `playsInline`

**2. Информационная область:**
- Заголовок клипа (`font-medium truncate`)
- Длительность в секундах
- Оценка виральности (`ScoreBadge`)
- CTA-текст, если есть (синий бейдж `bg-blue-50 text-blue-600`)
- Текстовый статус клипа

**3. Кнопки действий (при статусе `ready`):**
- "Скачать" -- синяя кнопка (`bg-blue-600 text-white`)
- "Опубликовать" -- зелёная кнопка-бордер (`border-green-600 text-green-600`)

**4. Бейджи публикаций:**
Для каждой публикации отображается маленький бейдж с иконкой платформы:

| Платформа | Иконка | ID |
|-----------|--------|-----|
| VK Клипы | Кинопленка | `vk` |
| Rutube | Телевизор | `rutube` |
| Дзен | Газета | `dzen` |
| Telegram | Самолёт | `telegram` |

| Статус публикации | Цвет фона | Индикатор |
|-------------------|-----------|-----------|
| `scheduled` | `bg-yellow-50 text-yellow-700` | Часы |
| `publishing` | `bg-blue-50 text-blue-700` | Часы |
| `published` | `bg-green-50 text-green-700` | Галочка (кликабельная ссылка на платформу) |
| `failed` | `bg-red-50 text-red-700` | Крестик |
| `cancelled` | `bg-gray-50 text-gray-500` | -- |

### Статусы клипов

| Статус | Отображение | Кнопки |
|--------|------------|--------|
| `pending` | "В очереди" | "Скачать" заблокирована |
| `rendering` | "Рендеринг..." + спиннер | "Скачать" заблокирована |
| `ready` | "Готов" | "Скачать" + "Опубликовать" активны |
| `published` | "Опубликован" | "Скачать" + "Опубликовать" активны |
| `failed` | "Ошибка" (красный) | Нет действий |

### Оценка виральности (Virality Score)

Компонент `ScoreBadge` из `clips/virality-breakdown.tsx`. Каждый клип получает оценку от 0 до 100:

| Компонент | Максимум | Что оценивает |
|-----------|---------|--------------|
| **Hook** | 25 | Насколько начало цепляет зрителя |
| **Engagement** | 25 | Удерживает ли внимание на протяжении клипа |
| **Flow** | 25 | Логичность и плавность повествования |
| **Trend** | 25 | Соответствие актуальным трендам |

### Диалог публикации (PublishDialog)

Модальное окно (`clips/publish-dialog.tsx`) для выбора платформ:

```
+------------------------------------------+
|  Опубликовать клип                  [X]  |
|                                          |
|  "5 способов увеличить конверсию"        |
|                                          |
|  Выберите платформы:                     |
|  [x] VK Клипы                           |
|  [x] Rutube                             |
|  [ ] Дзен                               |
|  [x] Telegram                           |
|                                          |
|  [Опубликовать сейчас]                   |
+------------------------------------------+
```

Доступны только подключённые платформы, соответствующие тарифу. После публикации -- задачи добавляются в BullMQ очередь `publish`.

### Транскрипт (TranscriptViewer)

Сворачиваемый блок (`transcript/transcript-viewer.tsx`) с полным текстом, разбитым на сегменты с таймкодами. Каждый сегмент можно редактировать (компонент `segment-editor.tsx`).

### Встроенный видеоплеер

При клике на превью клипа область превью заменяется HTML5 `<video>` с `autoPlay`, `controls`, `playsInline`. По окончании видео (`onEnded`) -- возврат к статичной миниатюре.

### Реальное время (polling)

Страница видео использует `VideoDetail` (Client Component) с tRPC-polling для отслеживания прогресса обработки. Статус обновляется автоматически (redirect после загрузки, обновление при смене статуса).

---

## 6. Редактор клипов

**Маршрут:** `/dashboard/videos/[videoId]/clips/[clipId]/edit`
**Файлы:** `apps/web/app/(dashboard)/dashboard/videos/[videoId]/clips/[clipId]/edit/`

```
+------------------------------------------------------------------+
|  +-- VideoPreview -----------------------+  +-- MetadataPanel --+ |
|  |                                       |  |                   | |
|  |   [Видеоплеер с субтитрами]          |  |  Заголовок:       | |
|  |                                       |  |  [____________]   | |
|  |   [ Play/Pause ]  0:22 / 0:45       |  |                   | |
|  |                                       |  |  Описание:        | |
|  +---------------------------------------+  |  [____________]   | |
|                                              |                   | |
|  +-- Timeline ----------------------------+ |  Формат:          | |
|  |  [====|====================|====]      | |  (o) 9:16         | |
|  |  0:00    0:22              0:45        | |  ( ) 1:1          | |
|  +----------------------------------------+ |  ( ) 16:9         | |
|                                              +-------------------+ |
|  +-- SubtitleEditor ----------------------+                       |
|  |  [0:00-0:05] "И самое важное..."      |                       |
|  |  [0:05-0:12] "это правильный..."      |                       |
|  |  [0:12-0:18] "Давайте разберём..."    |                       |
|  +----------------------------------------+                       |
|                                                                    |
|  +-- ActionBar ---------------------------------------------------+|
|  | [Предпросмотр]  [Сохранить]  [Отмена]                         ||
|  +----------------------------------------------------------------+|
+--------------------------------------------------------------------+
```

### Компоненты редактора

| Компонент | Файл | Назначение |
|-----------|------|-----------|
| `ClipEditor` | `clip-editor.tsx` (корневой) | Контейнер редактора |
| `VideoPreview` | `clip-editor/video-preview.tsx` | Видеоплеер с субтитрами |
| `Timeline` | `clip-editor/timeline.tsx` | Визуальная шкала времени с ползунками обрезки |
| `SubtitleEditor` | `clip-editor/subtitle-editor.tsx` | Редактирование текста субтитров по сегментам |
| `MetadataPanel` | `clip-editor/metadata-panel.tsx` | Заголовок, описание, выбор формата |
| `ActionBar` | `clip-editor/action-bar.tsx` | Кнопки "Предпросмотр", "Сохранить", "Отмена" |

### Возможности редактора

| Функция | Описание |
|---------|----------|
| Обрезка (Trim) | Перетаскивание ползунков начала/конца на таймлайне |
| Редактирование субтитров | Клик на сегмент -- текстовое поле для изменения |
| Заголовок и описание | Текстовые поля для метаданных публикации |
| Выбор формата | Portrait (9:16), Square (1:1), Landscape (16:9) |
| Предпросмотр | Воспроизведение с применёнными изменениями |

### Форматы вывода

| Формат | Соотношение | Для чего |
|--------|------------|---------|
| Portrait | 9:16 | VK Клипы, YouTube Shorts, TikTok |
| Square | 1:1 | Лента Instagram, VK посты |
| Landscape | 16:9 | YouTube, обычные видео |

---

## 7. Загрузка видео (/dashboard/upload)

**Файл:** `apps/web/components/upload/video-uploader.tsx`

### Два режима загрузки

Переключение табами "Загрузить файл" / "Вставить ссылку" (стиль `bg-brand-600 text-white` для активного).

#### Режим "Загрузить файл" -- область Drag & Drop

```
+--------------------------------------------------+
|                                                  |
|   +------------------------------------------+   |
|   |                                          |   |
|   |   Перетащите видео сюда                  |   |
|   |   MP4, WebM, MOV, AVI до 4 ГБ           |   |
|   |                                          |   |
|   |   [Выбрать файл]                         |   |
|   |                                          |   |
|   +------------------------------------------+   |
|                                                  |
+--------------------------------------------------+
```

- Пунктирная рамка: `border-2 border-dashed rounded-xl p-12`
- При перетаскивании: подсветка `border-brand-500 bg-brand-50`
- Скрытый `<input type="file" accept=".mp4,.webm,.mov,.avi,...">` за кнопкой "Выбрать файл"

#### Валидация файлов (клиентская, до загрузки)

| Проверка | Сообщение об ошибке |
|----------|-------------------|
| Неподдерживаемый MIME-тип | "Формат не поддерживается. Используйте MP4, WebM, MOV или AVI" |
| Размер > 4 ГБ | "Файл слишком большой. Максимум 4 ГБ" |
| Пустой файл | "Файл пустой" |
| Magic bytes не совпадают | "Неподдерживаемый формат файла" |

**Magic bytes проверка:** Проверяются первые 16 байт файла на сигнатуры WebM (`1A 45 DF A3`), MOV (`ftyp qt`), MP4 (`ftyp`), AVI (`RIFF...AVI`). Это защита от переименованных не-видео файлов.

#### Прогресс-бар загрузки

```
+--------------------------------------------------+
|  Загрузка: 65%                3.2 МБ/с -- 2 мин  |
|  [========================>-----------]           |
|                                                  |
|  [Отменить]                                      |
+--------------------------------------------------+
```

- ARIA-атрибуты: `role="progressbar"`, `aria-valuenow`, `aria-valuemin=0`, `aria-valuemax=100`
- Отображение скорости (МБ/с) и расчётного времени
- Кнопка "Отменить" -- прерывает XHR через `AbortController`
- Предупреждение `beforeunload` при закрытии вкладки во время загрузки

#### Состояния загрузки (UploadState)

| Состояние | Описание UI |
|-----------|-------------|
| `idle` | Зона drag & drop |
| `validating` | "Проверка файла..." |
| `uploading` | Прогресс-бар с процентами, скоростью и временем |
| `confirming` | "Подтверждение..." |
| `done` | Зелёное уведомление + redirect на страницу видео |
| `error` | Красное сообщение об ошибке |

#### Multipart upload

Для больших файлов используется multipart upload через `/api/upload` proxy:
- Файл делится на части по `partSize` байт
- Параллельная загрузка 3 частей одновременно (`CONCURRENT_PARTS = 3`)
- Retry до 3 попыток с экспоненциальным ожиданием (1с, 2с, 3с)
- Динамический таймаут XHR: `max(5мин, размер / 256 байт/с)`

#### Режим "Вставить ссылку"

```
+--------------------------------------------------+
|  [https://...____________________] [Загрузить]   |
+--------------------------------------------------+
```

Поле `<input type="url">` + кнопка. Поддерживаются прямые ссылки на видеофайлы и VK видео. После отправки -- redirect на страницу видео, скачивание через worker-download.

---

## 8. Аналитика (/dashboard/analytics)

**Рендеринг:** Client Component (tRPC useQuery)

```
+------------------------------------------------------------------+
|  Аналитика                  [7 дн] [14 дн] [30 дн] [90 дн] [Обновить] |
|                                                                  |
|  +-- OverviewCards (grid cols-1 sm:2 md:4) ---+                  |
|  +----------+  +----------+  +----------+  +----------+          |
|  | Просмотры|  | Лайки    |  | Репосты  |  | Клипов   |          |
|  | 12,450   |  | 890      |  | 234      |  | 42       |          |
|  +----------+  +----------+  +----------+  +----------+          |
|                                                                  |
|  +-- PlatformTable ----------------------------------------+     |
|  | Платформа | Просмотры | Лайки | Репосты | Клипов        |     |
|  |-----------|-----------|-------|---------|---------------|     |
|  | VK        | 8,200     | 560   | 120     | 25            |     |
|  | Rutube    | 2,100     | 180   | 45      | 10            |     |
|  | Дзен      | 1,500     | 100   | 50      | 5             |     |
|  | Telegram  | 650       | 50    | 19      | 2             |     |
|  +----------------------------------------------------------+     |
|                                                                  |
|  +-- TopClipsTable ----------------------------------------+     |
|  | # | Название                | Просмотры | Оценка        |     |
|  |---|-------------------------|-----------|---------------|     |
|  | 1 | "5 способов продаж"     | 3,200     | 78            |     |
|  | 2 | "Ошибки маркетинга"     | 2,100     | 72            |     |
|  | 3 | "Как выбрать нишу"      | 1,800     | 85            |     |
|  +----------------------------------------------------------+     |
|                                                                  |
|  +-- TimelineChart ----------------------------------------+     |
|  |  Просмотры за последние 30 дней                         |     |
|  |  ^                        *                             |     |
|  |  |           *   *      *   *                           |     |
|  |  |     *   *       *  *       *                         |     |
|  |  |   *                          *   *                   |     |
|  |  +---+---+---+---+---+---+---+---+----->               |     |
|  |      1   5   10  15   20  25  30                        |     |
|  +----------------------------------------------------------+     |
+------------------------------------------------------------------+
```

### Компоненты аналитики

| Компонент | Файл | Назначение |
|-----------|------|-----------|
| `DateRangePicker` | `analytics/date-range-picker.tsx` | Группа кнопок выбора периода |
| `OverviewCards` | `analytics/overview-cards.tsx` | 4 карточки суммарных метрик |
| `PlatformTable` | `analytics/platform-table.tsx` | Таблица разбивки по платформам |
| `TopClipsTable` | `analytics/top-clips-table.tsx` | Топ-10 клипов по просмотрам |
| `TimelineChart` | `analytics/timeline-chart.tsx` | Линейный график динамики просмотров |
| `AnalyticsEmpty` | `analytics/analytics-empty.tsx` | Пустое состояние (нет публикаций) |

### DateRangePicker (выбор периода)

Группа кнопок в контейнере `rounded-lg border bg-white p-1 shadow-sm`:

| Период | Значение `days` |
|--------|----------------|
| 7 дней | 7 |
| 14 дней | 14 |
| 30 дней | 30 (по умолчанию) |
| 90 дней | 90 |

Активная кнопка: `bg-blue-600 text-white`. Неактивные: `text-gray-600 hover:bg-gray-100`.

### Кнопка "Обновить"

Иконка `RefreshCwIcon` с анимацией `animate-spin` при загрузке. Инвалидирует все tRPC-запросы аналитики (`utils.analytics.invalidate()`).

### tRPC-запросы

| Запрос | Параметры | Описание |
|--------|----------|----------|
| `analytics.overview` | -- | Суммарные: totalViews, totalLikes, totalShares, publishedCount |
| `analytics.byPlatform` | -- | Разбивка по платформам |
| `analytics.topClips` | `{ limit: 10 }` | Топ клипы по просмотрам |
| `analytics.timeline` | `{ days }` | Данные для линейного графика (зависят от выбранного периода) |

### Пустое состояние (AnalyticsEmpty)

Отображается при `publishedCount === 0`. Подсказка: опубликуйте первый клип для начала сбора статистики.

### Обновление данных

Статистика с платформ собирается worker `stats-collector.ts` каждые 6 часов. Если клип опубликован менее 6 часов назад, данные могут быть неполными.

---

## 9. Настройки -- профиль и AI-провайдер (/dashboard/settings)

**Рендеринг:** Client Component (tRPC)

```
+------------------------------------------------------------------+
|  Настройки (h1, text-2xl font-bold)                max-w-2xl     |
|                                                                  |
|  +-- Секция: AI-провайдер ------------------------------------+  |
|  |  (o) Cloud.ru (Россия)                                     |  |
|  |      Все данные в РФ. ~21 руб за 60 мин                    |  |
|  |                                                            |  |
|  |  ( ) Global (Gemini, Claude, OpenAI)                       |  |
|  |      Транскрипты в US/EU. ~55 руб за 60 мин                |  |
|  +------------------------------------------------------------+  |
|                                                                  |
|  +-- Секция: BYOK API-ключи ---------------------------------+  |
|  |  Используйте свои API ключи для экономии на обработке      |  |
|  |  (или "Доступно при выборе Global стратегии")              |  |
|  |                                          [Управление ключами]|  |
|  +------------------------------------------------------------+  |
|                                                                  |
|  +-- Секция: Платформы для публикации -------------------------+  |
|  |  Подключите VK, Rutube, Дзен или Telegram для авто-постинга |  |
|  |                                               [Управление]  |  |
|  +------------------------------------------------------------+  |
+------------------------------------------------------------------+
```

### AI-провайдер

Переключение через radio-кнопки:

| Стратегия | Описание | Стоимость |
|-----------|----------|-----------|
| **Cloud.ru (Россия)** | Все данные обрабатываются в РФ. 152-ФЗ. По умолчанию | ~21 руб/60 мин |
| **Global** | Gemini, Claude, OpenAI. Транскрипты за пределами РФ | ~55 руб/60 мин |

При переключении на Global -- `window.confirm()` с предупреждением о передаче данных за пределы РФ.

### BYOK API-ключи (ссылка)

Кнопка "Управление ключами" ведёт на `/dashboard/settings/api-keys`. Активна **только** при Global стратегии. При RU-стратегии -- серая, неактивная (`bg-gray-100 text-gray-400 cursor-not-allowed`).

### Платформы для публикации (ссылка)

Кнопка "Управление" ведёт на `/dashboard/settings/platforms`. Всегда активна (`bg-blue-600 text-white`).

---

## 10. Тарифы и оплата (/dashboard/billing)

**Файлы:** `apps/web/app/(dashboard)/dashboard/billing/page.tsx`, `billing-client.tsx`

### Сравнение планов (PlanComparisonTable)

Сетка из 4 карточек (`grid grid-cols-1 md:grid-cols-4 gap-4`):

```
+----------+  +----------+  +----------+  +----------+
| Free     |  | Start    |  | Pro      |  | Business |
| Бесплатно|  | 990₽/мес |  | 2990₽/мес|  | 9990₽/мес|
|          |  |          |  |          |  |          |
| 30 мин   |  | 120 мин  |  | 1000 мин |  | Безлимит |
| 3 клипа  |  | 10 клипов|  | 100 клип.|  | 100 клип.|
| С водян. |  | Без вод. |  | Без вод. |  | Без вод. |
| знаком   |  | знака    |  | знака    |  | знака    |
| Хр: 3 дн.|  | Хр: 30дн|  | Хр: 90дн|  | Хр: 90дн|
|          |  |          |  |          |  |          |
|[Тек.план]|  | [Перейти]|  | [Перейти]|  | [Перейти]|
+----------+  +----------+  +----------+  +----------+
```

Текущий план выделен: `border-blue-500 ring-2 ring-blue-100`. Кнопки "Перейти на..." доступны только для планов выше текущего.

### Карточка подписки (SubscriptionCard)

Отображается для платных планов. Содержит:

| Поле | Описание |
|------|----------|
| Тариф | Название плана (PLAN_DISPLAY_NAMES) |
| Статус | "Активна" или "Проблема с оплатой" (красный, `past_due`) |
| Способ оплаты | "Карта" или "СБП" |
| Следующее списание | Дата в формате ДД.ММ.ГГГГ |

Действия:
- **"Отменить подписку"** -- `window.confirm()` с датой окончания. План остаётся до конца периода.
- **"Возобновить подписку"** -- для отменённых (`cancelAtPeriodEnd=true`).
- Предупреждение `past_due`: "Оплата не прошла. Обновите способ оплаты или продлите подписку вручную."

### Модальное окно оплаты (CheckoutModal)

```
+------------------------------------------+
|  Оплата: Pro                        [X]  |
|                                          |
|  2 990₽/мес                             |
|                                          |
|  (o) Банковская карта                    |
|      Visa, Mastercard, МИР              |
|                                          |
|  ( ) СБП                                |
|      Оплата по QR-коду                   |
|                                          |
|  [Оплатить 2 990₽]                      |
+------------------------------------------+
```

**Банковская карта:** Создание платежа через ЮKassa API, redirect на страницу ЮKassa. returnUrl -- `/dashboard/billing?status=success`.

**СБП (QR-код):** Отображение QR-кода для сканирования в мобильном банке. Polling статуса каждые 3 секунды (до 10 минут, `SBP_POLL_TIMEOUT_MS`). При таймауте: "Время ожидания истекло. Закройте окно и попробуйте снова."

### Карточка "Минуты заканчиваются" (ExtraMinutesCard)

Отображается при `minutesLimit - minutesUsed <= 10`:

```
+------------------------------------------+
|  Минуты заканчиваются          bg-amber-50 |
|  Осталось 5 мин.                          |
|  Докупите минуты по 15₽/мин.             |
|                                          |
|  [30 мин -- 450₽] [60 мин -- 900₽] [120 мин -- 1800₽]  |
+------------------------------------------+
```

---

## 11. Платформы для публикации (/dashboard/settings/platforms)

```
+------------------------------------------------------------------+
|  Платформы                                          max-w-2xl    |
|  Подключите платформы для авто-постинга.                         |
|                                                                  |
|  [Dev-режим: OAuth-заглушки]  (только в development)             |
|                                                                  |
|  [Авто-постинг недоступен...]  (только для Free-плана)           |
|                                                                  |
|  +-- PlatformCard: VK Клипы ---------------------+               |
|  | [Кинопленка] VK Клипы                         |               |
|  | Публикация в VK Clips                         |               |
|  |                [Подключено] [Проверить] [Откл.]|               |
|  | Аккаунт: @username                             |               |
|  +------------------------------------------------+               |
|                                                                  |
|  +-- PlatformCard: Rutube -----------------------+               |
|  | [Телевизор] Rutube                            |               |
|  | Публикация на Rutube         [Подключить]     |               |
|  +------------------------------------------------+               |
|                                                                  |
|  +-- PlatformCard: Дзен -------------------------+               |
|  | [Газета] Дзен                                 |               |
|  | Публикация в Яндекс Дзен     [Подключить]     |               |
|  +------------------------------------------------+               |
|                                                                  |
|  +-- PlatformCard: Telegram ---------------------+               |
|  | [Самолёт] Telegram                            |               |
|  | Публикация через бота        [Подключить]     |               |
|  +------------------------------------------------+               |
+------------------------------------------------------------------+
```

### Карточки платформ (PlatformCard)

| Платформа | Иконка | Тип авторизации | Поля формы |
|-----------|--------|----------------|------------|
| VK Клипы | Кинопленка | OAuth | -- (redirect на VK) |
| Rutube | Телевизор | Token | API Token |
| Дзен | Газета | OAuth | -- (redirect на Яндекс) |
| Telegram | Самолёт | Token | Bot Token + Channel ID (опционально) |

### Состояния карточки

**Не подключена, доступна (isAllowed=true):**
- Для OAuth: кнопка "Подключить" -- redirect на OAuth-провайдера
- Для Token: кнопка "Подключить" -- раскрытие формы ввода токена

**Подключена:**
- Бейдж "Подключено" (`text-green-600 bg-green-50`)
- Кнопка "Проверить" -- тестовый вызов API (`platform.testConnection`)
- Кнопка "Отключить" -- с `window.confirm("Отключить? Запланированные публикации будут отменены.")`
- Имя аккаунта (metadata.name / publisherName) + метка `(dev)` в dev-режиме

**Недоступна на тарифе (isAllowed=false):**
- Карточка затемнена (`opacity-60`)
- Текст "Недоступно на вашем тарифе" вместо описания
- Кнопка "Обновить тариф" ведёт на `/dashboard/billing`

### Доступность платформ по тарифам

| Платформа | Free | Start | Pro | Business |
|-----------|------|-------|-----|----------|
| VK Клипы | -- | Да | Да | Да |
| Rutube | -- | -- | Да | Да |
| Дзен | -- | -- | Да | Да |
| Telegram | -- | -- | Да | Да |

### Предупреждение для Free-плана

Жёлтый баннер `bg-amber-50 border-amber-200`:
- "Авто-постинг недоступен на вашем тарифе"
- Кнопка "Обновить тариф до Start (990₽/мес)" ведёт на `/dashboard/billing`

### Форма ввода токена (Rutube, Telegram)

```
+------------------------------------------+
|  Bot Token                               |
|  [Вставьте токен...______________]       |
|  Создайте бота через @BotFather          |
|                                          |
|  Channel ID (опционально, только TG)     |
|  [@channel или -100..._____________]     |
|                                          |
|  [Подключить]  [Отмена]                  |
+------------------------------------------+
```

### Dev-режим

В development-окружении отображается информационный баннер `bg-blue-50 border-blue-200` о том, что VK и Дзен используют симулированные OAuth-подключения с фиктивными токенами.

---

## 12. Командная работа (/dashboard/team)

**Файл:** `apps/web/app/(dashboard)/dashboard/team/page.tsx`

### Состояние "Нет команды"

```
+------------------------------------------+
|  Команда                                 |
|                                          |
|        [UsersIcon]                       |
|     Нет команды                          |
|  Создайте команду для совместной         |
|  работы. Доступно на Pro и Business.     |
|                                          |
+------------------------------------------+
|  Создать команду (CreateTeamForm)        |
|  Название: [___________________]         |
|  [Создать]                               |
+------------------------------------------+
```

### Состояние "Есть команда"

```
+----------------------------------------------------------+
|  Название команды                          [Покинуть]    |
|  Управление командой                       [Удалить]     |
|                                                          |
|  +-- MemberList ----------------------------------------+|
|  | Email               | Роль          | Действие       ||
|  |---------------------|---------------|----------------|
|  | owner@mail.ru       | Владелец      | --             ||
|  | admin@mail.ru       | Администратор | [Удалить]      ||
|  | member@mail.ru      | Участник      | [Удалить]      ||
|  +------------------------------------------------------+|
|                                                          |
|  Ожидающие приглашения:                                  |
|  | invite@mail.ru      | admin         | [Отменить]     |
|                                                          |
|  +-- InviteMemberForm --------------------------------+ |
|  | Email: [_______________] Роль: [admin/member v]    | |
|  | [Пригласить]                                       | |
|  +----------------------------------------------------+ |
|                                                          |
|  [Ошибки: если есть]                                     |
+----------------------------------------------------------+
```

### Компоненты

| Компонент | Файл | Назначение |
|-----------|------|-----------|
| `CreateTeamForm` | `team/create-team-form.tsx` | Форма создания команды |
| `MemberList` | `team/member-list.tsx` | Таблица участников + ожидающие приглашения |
| `InviteMemberForm` | `team/invite-member-form.tsx` | Форма приглашения по email + выбор роли |

### Роли

| Роль | Права |
|------|-------|
| **owner** (Владелец) | Все права: управление биллингом, удаление команды, приглашение |
| **admin** (Администратор) | Загрузка видео, управление клипами, приглашение участников |
| **member** (Участник) | Загрузка видео, просмотр и скачивание клипов |

### Действия

| Действие | Условие | UI-элемент |
|----------|---------|------------|
| Покинуть команду | Не владелец | Кнопка с `LogOutIcon` + `confirm()` |
| Удалить команду | Только владелец | Кнопка с `TrashIcon` + `confirm("Удалить команду? Это действие необратимо.")` |
| Удалить участника | owner или admin | Кнопка в MemberList |
| Отменить приглашение | owner или admin | Кнопка в MemberList |

### Лимиты по тарифам

| Тариф | Максимум участников |
|-------|-------------------|
| Free | 1 (команда недоступна) |
| Start | 1 (команда недоступна) |
| Pro | 3 |
| Business | 10 |

---

## 13. API-ключи BYOK (/dashboard/settings/api-keys)

**Файлы:** `apps/web/app/(dashboard)/dashboard/settings/api-keys/page.tsx`, `apps/web/components/settings/byok-keys-panel.tsx`

### Условие доступности

API-ключи доступны **только при Global AI стратегии**. Если выбрана RU-стратегия, отображается заглушка:

```
+------------------------------------------+
|  Global стратегия не активна             |
|                                          |
|  API ключи доступны только при Global    |
|  AI стратегии. Сейчас у вас Cloud.ru.    |
|                                          |
|  Переключить на Global в настройках      |
+------------------------------------------+
```

### Хранилище ключей (Vault)

**Заблокированное состояние:**

```
+----------------------------------------------------------+
|  API Ключи              [x] Хранилище заблокировано       |
|                                                          |
|  Введите пароль для доступа к API ключам.                |
|  Ключи зашифрованы AES-256 и хранятся только в браузере. |
|                                                          |
|  [Пароль хранилища________] [Открыть]                    |
+----------------------------------------------------------+
```

**Разблокированное состояние:**

```
+----------------------------------------------------------+
|  API Ключи              [o] Хранилище открыто [Заблокир.] |
|                                                          |
|  Хранилище автоматически заблокируется через 30 минут.   |
+----------------------------------------------------------+
```

- Индикатор: зелёная точка (`bg-green-500`) / красная (`bg-red-500`)
- Enter в поле пароля вызывает `handleUnlock`
- Автоблокировка через 30 минут бездействия (событие `onVaultLock`)

### Карточки провайдеров (ProviderCard)

Для каждого провайдера из `BYOK_PROVIDERS` (Gemini, OpenAI, Anthropic, OpenRouter):

**Ключ не добавлен:**
```
+------------------------------------------+
|  Gemini API              [Не подключен]  |
|  Google Gemini models                    |
|                                          |
|  [AIza...______________] [Проверить]     |
|  Где взять ключ? (ссылка)                |
+------------------------------------------+
```

**Ключ добавлен:**
```
+------------------------------------------+
|  Gemini API                [Подключен]   |
|  Google Gemini models                    |
|                                          |
|  +------------------------------------+  |
|  | AIza...****YZ8k                    |  |
|  | Добавлен 15.03.2026        [Удалить]| |
|  +------------------------------------+  |
+------------------------------------------+
```

### Процесс добавления ключа

1. Пользователь вводит API-ключ в поле `<input type="password">` с placeholder из `info.keyPrefix`
2. Нажимает "Проверить" (кнопка `bg-blue-600`, текст меняется на "Проверка...")
3. Ключ отправляется на сервер для тестирования (`user.testByokKey`)
4. При валидном ключе -- шифрование AES-GCM 256-bit в браузере через Web Crypto API
5. Зашифрованный ключ сохраняется в IndexedDB
6. Отображается подтверждение "Ключ [name] подключен" (зелёный)
7. Показывается замаскированный preview ключа + дата добавления

### Удаление ключа

Кнопка "Удалить" с `window.confirm()`. Активна только при разблокированном хранилище.

### Технологии шифрования

| Компонент | Технология |
|-----------|-----------|
| Шифрование | Web Crypto API (AES-GCM 256-bit) |
| Деривация ключа | PBKDF2 из пароля пользователя (100K+ итераций) |
| Хранилище | IndexedDB (браузер пользователя) |
| Автоблокировка | 30 минут неактивности |

### Информационная панель

Под карточками провайдеров -- блок `bg-blue-50 border-blue-200`:

> "Ваши API ключи зашифрованы в браузере (AES-GCM 256-bit) и никогда не сохраняются на сервере. При обработке видео ключи передаются серверу через защищённое HTTPS-соединение, используются для одного запроса и сразу удаляются."

### Предупреждение о недоступности

Если браузер не поддерживает Web Crypto API или IndexedDB (нет HTTPS), отображается жёлтый баннер `bg-yellow-50 border-yellow-200`: "Хранилище ключей недоступно в этом браузере."

---

## 14. Скелетоны загрузки (Loading Skeletons)

Все страницы дашборда имеют скелетоны загрузки -- анимированные заполнители, отображаемые до получения данных. Реализованы как отдельные файлы `loading.tsx` (Next.js Streaming / Suspense).

### Файлы скелетонов

| Страница | Файл `loading.tsx` | Содержимое скелетона |
|----------|--------------------|-------------------  |
| Дашборд | `dashboard/loading.tsx` | 4 карточки + 10 строк таблицы видео |
| Загрузка | `dashboard/upload/loading.tsx` | Форма загрузки |
| Аналитика | `dashboard/analytics/loading.tsx` | 4 карточки + область графика |
| Настройки | `dashboard/settings/loading.tsx` | Секции настроек |
| Видео | `dashboard/videos/[videoId]/loading.tsx` | Заголовок + сетка клипов |
| Редактор | `dashboard/.../edit/loading.tsx` | Область превью + таймлайн |

### Стиль скелетонов

Единый паттерн для всех скелетонов:

```html
<div className="animate-pulse" role="status" aria-label="Загрузка...">
  <div className="h-N w-N bg-gray-200 rounded" />
</div>
```

- Анимация `animate-pulse` -- пульсирующее мерцание
- Серые прямоугольники `bg-gray-200 rounded` имитируют контент
- Атрибуты доступности: `role="status"`, `aria-label="Загрузка ..."`
- Размеры элементов совпадают с реальным контентом для предотвращения layout shift

### Пример скелетона дашборда

```
+------------------------------------------------------------------+
|  [========]  (заголовок)                                         |
|                                                                  |
|  +----------+  +----------+  +----------+  +----------+          |
|  | [===]    |  | [===]    |  | [===]    |  | [===]    |          |
|  | [====]   |  | [====]   |  | [====]   |  | [====]   |          |
|  | [======] |  | [======] |  | [======] |  | [======] |          |
|  +----------+  +----------+  +----------+  +----------+          |
|                                                                  |
|  [========]  (подзаголовок)                                      |
|                                                                  |
|  +------------------------------------------------------------+  |
|  | [img] [==============]         [=====] [====]              |  |
|  | [img] [==============]         [=====] [====]              |  |
|  | [img] [==============]         [=====] [====]              |  |
|  | ...  (10 строк)                                            |  |
|  +------------------------------------------------------------+  |
+------------------------------------------------------------------+
```

### Inline-скелетоны

Страница аналитики также использует inline-скелетоны (определены прямо в компоненте, а не в отдельном `loading.tsx`): при первичной загрузке данных отображаются анимированные карточки (`animate-pulse`) вместо реальных OverviewCards и пустой блок графика.

### Пустые состояния (Empty States)

| Страница | Условие | Сообщение |
|----------|---------|----------|
| Дашборд | Нет видео | Иконка + "Загрузите первое видео" + кнопка |
| Аналитика | Нет публикаций | Подсказка опубликовать клипы |
| Команда | Нет команды | Иконка UsersIcon + "Нет команды" + форма создания |

---

## 15. Адаптивный дизайн и отзывчивость

### Breakpoints (Tailwind CSS)

| Breakpoint | Минимальная ширина | Типичные устройства |
|------------|-------------------|---------------------|
| `sm` | 640px | Телефоны в ландшафтном режиме |
| `md` | 768px | Планшеты |
| `lg` | 1024px | Небольшие ноутбуки |
| `xl` | 1280px | Десктоп |

### Адаптивные сетки

| Компонент | Mobile (<640px) | Tablet (sm/md) | Desktop (md+) |
|-----------|----------------|----------------|---------------|
| Карточки статистики | 1 колонка | 2 колонки (`sm:grid-cols-2`) | 4 колонки (`md:grid-cols-4`) |
| Карточки планов | 1 колонка | 1 колонка | 4 колонки (`md:grid-cols-4`) |
| Карточки клипов | 1 колонка | 2 колонки | 3-4 колонки |
| Обзорные карточки аналитики | 1 колонка | 2 колонки | 4 колонки |
| Навигация | Горизонтальный скролл | Все элементы видны | Все элементы видны |

### Ограничения ширины контента

| Страница | Max width | Описание |
|----------|-----------|----------|
| Настройки | `max-w-2xl` | Узкие формы для удобства чтения |
| Тарифы | `max-w-4xl` | Шире для 4 карточек планов |
| Загрузка видео | `max-w-2xl` | Узкая форма |
| API-ключи | `max-w-2xl` | Узкая форма |
| Платформы | `max-w-2xl` | Узкая форма |
| Дашборд | `container` | Адаптивный контейнер |
| Аналитика | `container` | Адаптивный контейнер (полная ширина) |

### Мобильные адаптации

- **Навигация:** Все пункты в одну горизонтальную строку, при нехватке места -- горизонтальный скролл
- **Карточки клипов:** Превью 9:16 стекаются вертикально на мобильных
- **DateRangePicker:** Кнопки переносятся (`flex-wrap`) при нехватке места
- **Формы:** Поля и кнопки занимают полную ширину
- **Модальные окна:** `w-full max-w-md mx-4` -- адаптивные с отступами от края
- **Таблицы:** Горизонтальный скролл на узких экранах
- **Кнопки действий на клипах:** `flex gap-2`, обе кнопки `flex-1` для равного распределения

### Основной контейнер

`container mx-auto px-4` -- центрирование контента с горизонтальными отступами 16px. Фон страниц дашборда -- `bg-gray-50`, компоненты -- `bg-white rounded-xl border`.

---

## 🔄 Отличия Dev и Prod сред

В Dev-среде интерфейс КлипМейкер содержит дополнительные визуальные элементы, предупреждения и заглушки, которые отсутствуют в продакшне.

### Dev-баннер на странице платформ

На странице `/dashboard/settings/platforms` в Dev-режиме отображается информационный баннер (`bg-blue-50 border-blue-200`):

```
+-----------------------------------------------------------+
|  [i] Dev-режим: OAuth-заглушки                            |
|  VK и Дзен используют симулированные OAuth-подключения     |
|  с фиктивными токенами.                                   |
+-----------------------------------------------------------+
```

В продакшне этот баннер не отображается.

### Бейджи "(dev)" на подключённых платформах

| Элемент | Dev | Prod |
|---------|-----|------|
| **Имя аккаунта VK** | `Dev Mode (dev)` | `@реальное_имя` |
| **Имя аккаунта Дзен** | `Dev Mode (dev)` | `Реальное имя канала` |
| **Бейдж подключения** | "Подключено" + метка `(dev)` | "Подключено" (без метки) |

```
Dev:  VK Клипы    [Подключено]  Аккаунт: Dev Mode (dev)
Prod: VK Клипы    [Подключено]  Аккаунт: @ivan_petrov
```

### Ссылка-приглашение в Dev

На странице `/dashboard/team` в Dev-режиме при приглашении участника ссылка-приглашение отображается прямо в интерфейсе (так как email не отправляется реально):

```
Dev:  Приглашение отправлено! Ссылка: http://localhost:3000/invite?token=abc123
Prod: Приглашение отправлено на email@example.com
```

### Email Preview URLs (только Dev)

Когда система отправляет email (верификация, сброс пароля, приглашение в команду), в Dev-режиме вместо реальной доставки используется Ethereal. Preview URL для просмотра письма отображается в логах:

```bash
# В логах контейнера web:
Preview URL: https://ethereal.email/message/abc123def456
```

В продакшне письма доставляются на реальный почтовый ящик пользователя.

### Сводная таблица UI-отличий

| UI-элемент | Dev | Prod |
|-----------|-----|------|
| **Баннер "Dev-режим" на платформах** | Отображается (`bg-blue-50`) | Скрыт |
| **Бейдж `(dev)` на подключениях** | Показан рядом с именем аккаунта | Не показан |
| **Ссылка-приглашение в команду** | Отображается в UI | Отправляется по email |
| **Email preview URL** | В логах контейнера (Ethereal) | Не применимо (реальная доставка) |
| **Кнопки оплаты** | Работают, но ЮKassa не настроена (ошибка при попытке оплаты) | Полноценная оплата |
| **Автоверификация email** | Аккаунт активен сразу после регистрации | Необходимо подтверждение по ссылке из email |
