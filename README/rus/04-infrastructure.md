# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ö–ª–∏–ø–ú–µ–π–∫–µ—Ä

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#1-–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
2. [–°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#2-—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
3. [–°–µ—Ç–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#3-—Å–µ—Ç–µ–≤—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
4. [–•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö](#4-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ-–¥–∞–Ω–Ω—ã—Ö)
5. [–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã](#5-–≤–Ω–µ—à–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å—ã)
6. [–°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](#6-—Å—Ç–æ–∏–º–æ—Å—Ç—å-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
7. [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º](#7-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ-–ø–æ-—ç—Ç–∞–ø–∞–º)
8. [–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å](#8-–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å)
9. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥](#9-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–∞–ª–µ—Ä—Ç–∏–Ω–≥)
10. [–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó](#10-—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ-152-—Ñ–∑)

---

## 1. –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```
                        –ò–Ω—Ç–µ—Ä–Ω–µ—Ç
                            |
                     [ nginx / SSL ]
                            |
                    [ Next.js Web App ]
                     (–ø–æ—Ä—Ç 3000)
                            |
              +-------------+-------------+
              |                           |
         [ PostgreSQL ]            [ Redis 7 ]
         (–ø–æ—Ä—Ç 5432)              (–ø–æ—Ä—Ç 6379)
                                       |
                    +------------------+------------------+
                    |         |         |                  |
              [worker-stt] [worker-llm] [worker-video] [worker-publish]
                    |         |
              [Cloud.ru AI API]     [ S3 Storage ]
                                         |
                              [Yandex Object Storage]
```

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–∞ –æ–¥–Ω–æ–º VPS (MVP). –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–æ—Ä–∫–µ—Ä—ã –º–æ–≥—É—Ç –≤—ã–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã.

---

## 2. –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–æ 500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|---------|-----------|
| **CPU** | 4 —è–¥—Ä–∞ (x86_64) | FFmpeg —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 2 —è–¥—Ä–∞ |
| **RAM** | 8 –ì–ë | PostgreSQL: 2 –ì–ë, Web: 2 –ì–ë, –≤–æ—Ä–∫–µ—Ä—ã: 4 –ì–ë |
| **SSD** | 100 –ì–ë NVMe | 50 –ì–ë –¥–ª—è —Å–∏—Å—Ç–µ–º—ã + Docker, 50 –ì–ë –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ |
| **–û–°** | Ubuntu 22.04+ LTS | –ò–ª–∏ Debian 12+ |

### 2.2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (500-2500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|---------|-----------|
| **CPU** | 8 —è–¥–µ—Ä | 3 video-–≤–æ—Ä–∫–µ—Ä–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ |
| **RAM** | 16 –ì–ë | –ó–∞–ø–∞—Å –¥–ª—è –ø–∏–∫–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ |
| **SSD** | 250 –ì–ë NVMe | –ú–µ—Å—Ç–æ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ |
| **–û–°** | Ubuntu 24.04 LTS | –ü–æ—Å–ª–µ–¥–Ω–∏–π LTS |

### 2.3. –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (2500+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|---------|-----------|
| **CPU** | 16+ —è–¥–µ—Ä | 5+ video-–≤–æ—Ä–∫–µ—Ä–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ |
| **RAM** | 32 –ì–ë | PostgreSQL read replica + PgBouncer |
| **SSD** | 500 –ì–ë NVMe | –ë–æ–ª—å—à–æ–π –∫–µ—à –≤–∏–¥–µ–æ |
| **GPU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** | A100 80GB –∏–ª–∏ 2x RTX 4090 | Self-hosted T-Pro 2.1 + Whisper |

### 2.4. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | CPU (–ª–∏–º–∏—Ç) | RAM (–ª–∏–º–∏—Ç) | –î–∏—Å–∫ |
|-----------|------------|------------|------|
| web (Next.js) | 1 —è–¥—Ä–æ | 2 –ì–ë | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| worker-stt | 0.5 —è–¥—Ä–∞ | 1 –ì–ë | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| worker-llm | 0.5 —è–¥—Ä–∞ | 1 –ì–ë | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| worker-video | 2 —è–¥—Ä–∞ | 4 –ì–ë | 50+ –ì–ë (temp) |
| worker-publish | 0.25 —è–¥—Ä–∞ | 512 –ú–ë | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| PostgreSQL | 1 —è–¥—Ä–æ | 2 –ì–ë | 20+ –ì–ë |
| Redis | 0.25 —è–¥—Ä–∞ | 512 –ú–ë | 1 –ì–ë |

**worker-video** -- –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å CPU. FFmpeg –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —è–¥—Ä–∞ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

### 2.5. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ FFmpeg

FFmpeg —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker-–æ–±—Ä–∞–∑–∞ (Alpine: `apk add ffmpeg`).

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- FFmpeg 7.x
- –ö–æ–¥–µ–∫–∏: libx264, libx265, libvpx, libfdk-aac
- –§–∏–ª—å—Ç—Ä—ã: subtitles, overlay, scale, crop
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 5 –º–∏–Ω—É—Ç —Ç–∞–π–º–∞—É—Ç –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ –∫–ª–∏–ø–∞

---

## 3. –°–µ—Ç–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1. –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ú–∏–Ω–∏–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-------------|---------|---------------|-------------|
| **–í—Ö–æ–¥—è—â–∏–π** | 100 –ú–±–∏—Ç/—Å | 1 –ì–±–∏—Ç/—Å | –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –¥–æ 4 –ì–ë |
| **–ò—Å—Ö–æ–¥—è—â–∏–π** | 100 –ú–±–∏—Ç/—Å | 1 –ì–±–∏—Ç/—Å | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–ø–æ–≤, –ø—É–±–ª–∏–∫–∞—Ü–∏—è |
| **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ Cloud.ru** | < 50 –º—Å | < 20 –º—Å | API-–≤—ã–∑–æ–≤—ã AI |
| **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ S3** | < 50 –º—Å | < 20 –º—Å | –ó–∞–≥—Ä—É–∑–∫–∞/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ |

### 3.2. –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã

| –ü–æ—Ä—Ç | –ü—Ä–æ—Ç–æ–∫–æ–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –û—Ç–∫—É–¥–∞ |
|------|---------|-----------|--------|
| 22 | TCP | SSH | –¢–æ–ª—å–∫–æ —Å IP –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| 80 | TCP | HTTP (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS) | –í–µ—Å—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |
| 443 | TCP | HTTPS | –í–µ—Å—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ—Ä—Ç—ã (—Ç–æ–ª—å–∫–æ Docker-—Å–µ—Ç—å):

| –ü–æ—Ä—Ç | –°–µ—Ä–≤–∏—Å |
|------|--------|
| 3000 | Next.js (web) |
| 5432 | PostgreSQL |
| 6379 | Redis |

### 3.3. DNS

| –ó–∞–ø–∏—Å—å | –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|---------|
| clipmaker.ru | A | IP VPS |
| www.clipmaker.ru | CNAME | clipmaker.ru |

### 3.4. SSL/TLS

- TLS 1.2+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è TLS 1.3)
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ–º—ã–π)
- HSTS: –≤–∫–ª—é—á–µ–Ω (max-age=31536000)

---

## 4. –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

### 4.1. PostgreSQL 16

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≤–∏–¥–µ–æ, –∫–ª–∏–ø—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| –í–µ—Ä—Å–∏—è | 16-alpine |
| –ö–æ–¥–∏—Ä–æ–≤–∫–∞ | UTF-8 |
| Locale | ru_RU.UTF-8 |
| shared_buffers | 25% RAM (512 –ú–ë –ø—Ä–∏ 2 –ì–ë –ª–∏–º–∏—Ç–µ) |
| effective_cache_size | 75% RAM |
| max_connections | 100 (MVP), 200 (–º–∞—Å—à—Ç–∞–±) |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `users.email` (unique)
- `users.vk_id` (unique)
- `users.team_id`
- `videos.(user_id, created_at DESC)`
- `videos.team_id`
- `clips.(video_id, virality_score DESC)`

**–ë—ç–∫–∞–ø—ã:**
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π pg_dump (cron 03:00 MSK)
- –•—Ä–∞–Ω–µ–Ω–∏–µ: 30 –¥–Ω–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –∫–æ–ø–∏—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3)

### 4.2. Redis 7

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (BullMQ), –∫–µ—à —Å–µ—Å—Å–∏–π, rate limiting.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| –í–µ—Ä—Å–∏—è | 7-alpine |
| maxmemory | 512 –ú–ë |
| maxmemory-policy | allkeys-lru |
| appendonly | yes (AOF-–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è) |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Redis:**

| –ö–ª—é—á | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `bull:stt:*` | –û—á–µ—Ä–µ–¥—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ |
| `bull:llm-analyze:*` | –û—á–µ—Ä–µ–¥—å AI-–∞–Ω–∞–ª–∏–∑–∞ |
| `bull:video-render:*` | –û—á–µ—Ä–µ–¥—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ |
| `bull:publish:*` | –û—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |
| `rate:*` | –°—á—ë—Ç—á–∏–∫–∏ rate limiting |
| `session:*` | –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### 4.3. S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –≤–∏–¥–µ–æ, –≥–æ—Ç–æ–≤—ã—Ö –∫–ª–∏–ø–æ–≤, –º–∏–Ω–∏–∞—Ç—é—Ä.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | Yandex Object Storage / Cloud.ru S3 |
| –†–µ–≥–∏–æ–Ω | ru-central-1 |
| –ö–ª–∞—Å—Å —Ö—Ä–∞–Ω–µ–Ω–∏—è | Standard |
| –ë–∞–∫–µ—Ç | clipmaker |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∫–µ—Ç–∞:**

```
clipmaker/
  videos/
    <user-id>/
      <video-id>/
        source.mp4          -- –ò—Å—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ
  clips/
    <user-id>/
      <clip-id>/
        clip.mp4             -- –ì–æ—Ç–æ–≤—ã–π –∫–ª–∏–ø
        thumbnail.jpg        -- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞
```

**–†–∞—Å—á—ë—Ç –æ–±—ä—ë–º–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

| –†–∞—Å—á—ë—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|---------|
| –°—Ä–µ–¥–Ω–µ–µ –≤–∏–¥–µ–æ | 500 –ú–ë (60 –º–∏–Ω, 1080p) |
| –°—Ä–µ–¥–Ω–∏–π –∫–ª–∏–ø | 15 –ú–ë (45 —Å–µ–∫, 1080p) |
| 10 –∫–ª–∏–ø–æ–≤ –Ω–∞ –≤–∏–¥–µ–æ | 150 –ú–ë –∫–ª–∏–ø–æ–≤ |
| 100 –≤–∏–¥–µ–æ/–º–µ—Å | ~65 –ì–ë/–º–µ—Å (–≤–∏–¥–µ–æ + –∫–ª–∏–ø—ã) |

**–ü–æ–ª–∏—Ç–∏–∫–∏ –æ—á–∏—Å—Ç–∫–∏:**

| –ü–ª–∞–Ω | –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è | –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ |
|------|-------------|-------------|
| Free | 3 –¥–Ω—è | S3 Lifecycle Rule |
| Start | 30 –¥–Ω–µ–π | S3 Lifecycle Rule |
| Pro / Business | 90 –¥–Ω–µ–π | S3 Lifecycle Rule |

### 4.4. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (temp)

Worker-video –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∏—Å–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ FFmpeg:

| –û–ø–µ—Ä–∞—Ü–∏—è | Temp-–æ–±—ä—ë–º | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ |
|----------|-----------|-------------|
| –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∏–∑ S3 | –¥–æ 4 –ì–ë | –î–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| FFmpeg —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ | –¥–æ 500 –ú–ë/–∫–ª–∏–ø | –î–æ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ S3 |
| –ö–µ—à —Å—É–±—Ç–∏—Ç—Ä–æ–≤ | –¥–æ 10 –ú–ë | –î–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ |

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π temp-–∫–∞—Ç–∞–ª–æ–≥: –º–∏–Ω–∏–º—É–º 50 –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞.

---

## 5. –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### 5.1. Cloud.ru Evolution Foundation Models

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| API | OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π |
| Endpoint | https://api.cloud.ru/v1 |
| –ú–æ–¥–µ–ª–∏ | T-Pro 2.1, GigaChat3-10B, Qwen3-235B, GLM-4.6, Whisper |
| SLA | 99.9% (–ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É) |
| –û–ø–ª–∞—Ç–∞ | –†—É–±–ª–∏, –ø–æ–º–µ—Å—è—á–Ω–æ |
| –ë–æ–Ω—É—Å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ | 4 000 —Ä—É–±. (—Ñ–∏–∑.–ª–∏—Ü–∞), 20 000 —Ä—É–±. (—é—Ä.–ª–∏—Ü–∞) |

**–°—Ç–æ–∏–º–æ—Å—Ç—å AI –Ω–∞ Cloud.ru:**

| –ú–æ–¥–µ–ª—å | Input (—Ä—É–±./1M —Ç–æ–∫–µ–Ω–æ–≤) | Output (—Ä—É–±./1M —Ç–æ–∫–µ–Ω–æ–≤) |
|--------|-------------------------|--------------------------|
| T-Pro 2.1 | ~35 | ~70 |
| GigaChat3-10B | 10 | 10 |
| Qwen3-235B | 17 | ~70 |
| GLM-4.6 | 55 | 220 |
| Whisper Large-v3 | 0.005 —Ä—É–±./—Å–µ–∫ | -- |

### 5.2. –ÆKassa

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| –¢–∏–ø | –ü–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑ |
| –ú–µ—Ç–æ–¥—ã | –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (Visa, MasterCard, –ú–ò–†), –°–ë–ü |
| –ö–æ–º–∏—Å—Å–∏—è | ~3.5% –æ—Ç —Å—É–º–º—ã |
| –í–∞–ª—é—Ç–∞ | –†—É–±–ª–∏ (RUB) |
| Webhook URL | https://clipmaker.ru/api/billing/webhook |
| –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏ | –î–∞ (–∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫) |

### 5.3. VK API

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|
| OAuth | VK ID (OAuth 2.0) |
| –°–∫–æ—É–ø—ã | video, wall, offline |
| Rate limit | 5 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ |
| –î–ª—è –∞–≤—Ç–æ-–ø–æ—Å—Ç–∏–Ω–≥–∞ | VK Clips API |

### 5.4. –î—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | API | Rate Limit |
|-----------|-----|-----------|
| Rutube | REST API | –ù–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω |
| –î–∑–µ–Ω (Zen) | Publisher API | –ù–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω |
| Telegram | Bot API | 30 msg/sec |

---

## 6. –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 6.1. –°—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (MVP)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å |
|-----------|----------|--------------|
| VPS 4 CPU / 8 GB / 100 GB | AdminVPS | ~2 000 —Ä—É–±. |
| S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ 100 –ì–ë | Cloud.ru / Yandex | ~300 —Ä—É–±. |
| Cloud.ru AI (50 –≤–∏–¥–µ–æ/–º–µ—Å) | Cloud.ru | ~1 000 —Ä—É–±. |
| –î–æ–º–µ–Ω .ru | reg.ru | ~200 —Ä—É–±./–≥–æ–¥ |
| SSL | Let's Encrypt | 0 —Ä—É–±. |
| **–ò—Ç–æ–≥–æ** | | **~3 500 —Ä—É–±./–º–µ—Å** |

### 6.2. –†–∞—Å—Ç—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (500+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å |
|-----------|----------|--------------|
| VPS 8 CPU / 16 GB / 250 GB | HOSTKEY | ~5 000 —Ä—É–±. |
| S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ 500 –ì–ë | Cloud.ru | ~1 500 —Ä—É–±. |
| Cloud.ru AI (500 –≤–∏–¥–µ–æ/–º–µ—Å) | Cloud.ru | ~10 000 —Ä—É–±. |
| **–ò—Ç–æ–≥–æ** | | **~16 500 —Ä—É–±./–º–µ—Å** |

### 6.3. –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ

| –≠—Ç–∞–ø | –°—Ç–æ–∏–º–æ—Å—Ç—å (60 –º–∏–Ω –≤–∏–¥–µ–æ) |
|------|-------------------------|
| –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (Whisper) | 18 —Ä—É–±. |
| AI-–∞–Ω–∞–ª–∏–∑ (T-Pro 2.1) | ~2.5 —Ä—É–±. |
| –ó–∞–≥–æ–ª–æ–≤–∫–∏/CTA (GigaChat3) | ~0.1 —Ä—É–±. |
| **–ò—Ç–æ–≥–æ AI** | **~20.6 —Ä—É–±.** |
| S3 —Ö—Ä–∞–Ω–µ–Ω–∏–µ (30 –¥–Ω–µ–π) | ~5 —Ä—É–±. |
| **–í—Å–µ–≥–æ** | **~25 —Ä—É–±.** |

**–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: ~0.34 —Ä—É–±./–º–∏–Ω –≤–∏–¥–µ–æ** (—Ç–æ–ª—å–∫–æ AI-–æ–±—Ä–∞–±–æ—Ç–∫–∞).

---

## 7. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º

### 7.1. –§–∞–∑–∞ 1: –ó–∞–ø—É—Å–∫ (0-500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

```
+------------------------------------------+
|           1 VPS (4 CPU / 8 GB)           |
|                                          |
|  [web] [stt] [llm] [video] [publish]    |
|  [PostgreSQL] [Redis]                    |
|                                          |
|  –í–Ω–µ—à–Ω–∏–µ:                                |
|  [Cloud.ru AI API] [S3] [–ÆKassa]       |
+------------------------------------------+
```

- 1 VPS, –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- Cloud.ru API –¥–ª—è AI
- MinIO –∏–ª–∏ Yandex Object Storage –¥–ª—è S3

### 7.2. –§–∞–∑–∞ 2: –†–æ—Å—Ç (500-2500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

```
+------------------------------------------+
|        VPS #1 (8 CPU / 16 GB)            |
|  [web] [PostgreSQL] [Redis]              |
+------------------------------------------+
|        VPS #2 (8 CPU / 16 GB)            |
|  [stt x2] [llm x2] [video x3]           |
|  [publish]                               |
+------------------------------------------+
```

- 2 VPS: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –≤–æ—Ä–∫–µ—Ä—ã
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ-–≤–æ—Ä–∫–µ—Ä–æ–≤
- Self-hosted Whisper (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏)

### 7.3. –§–∞–∑–∞ 3: –ú–∞—Å—à—Ç–∞–± (2500+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

```
+------------------------------------------+
|        VPS #1 (8 CPU / 16 GB)            |
|  [web x2] [nginx LB]                    |
|  [PostgreSQL + PgBouncer]                |
|  [Redis Cluster]                         |
+------------------------------------------+
|        GPU VPS (A100 80GB)               |
|  [Self-hosted T-Pro 2.1]                |
|  [Self-hosted Whisper]                   |
+------------------------------------------+
|        VPS #3 (16 CPU / 32 GB)           |
|  [video x5] [publish x2]                |
+------------------------------------------+
```

- Self-hosted LLM –Ω–∞ GPU VPS (break-even –ø—Ä–∏ 5000+ –≤–∏–¥–µ–æ/–º–µ—Å)
- PostgreSQL read replica
- Redis Cluster
- Multiple web-–∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∑–∞ load balancer

---

## 8. –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

### 8.1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

–í—Å–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å `restart: always`:

```yaml
services:
  web:
    restart: always
  worker-video:
    restart: always
```

### 8.2. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (Retry)

BullMQ-–≤–æ—Ä–∫–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –æ—Ç–∫–∞—Ç–æ–º:

```
–ü–æ–ø—ã—Ç–∫–∞ 1: –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
–ü–æ–ø—ã—Ç–∫–∞ 2: —á–µ—Ä–µ–∑ 30 —Å–µ–∫
–ü–æ–ø—ã—Ç–∫–∞ 3: —á–µ—Ä–µ–∑ 2 –º–∏–Ω
```

### 8.3. Fallback AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

```
Cloud.ru –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?
  ‚Üí –ï—Å–ª–∏ Global-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∫–ª—é—á–µ–Ω–∞: fallback –Ω–∞ Gemini/Claude
  ‚Üí –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ RU: –∑–∞–¥–∞—á–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```

### 8.4. –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|-----------------|
| Uptime | 99.5% (26 —á–∞—Å–æ–≤ –ø—Ä–æ—Å—Ç–æ—è/–≥–æ–¥) |
| –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (RTO) | < 30 –º–∏–Ω—É—Ç |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö (RPO) | < 24 —á–∞—Å–∞ (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã) |

---

## 9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

### 9.1. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|-----------|
| –ú–µ—Ç—Ä–∏–∫–∏ | Prometheus | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ CPU, RAM, –æ—á–µ—Ä–µ–¥–µ–π |
| –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | Grafana | –î–∞—à–±–æ—Ä–¥—ã, –≥—Ä–∞—Ñ–∏–∫–∏ |
| –õ–æ–≥–∏ | Pino + Loki | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–ª–æ–≥–∏ |
| –ê–ª–µ—Ä—Ç—ã | Grafana Alerting | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram |
| Uptime | UptimeRobot (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π) | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ |

### 9.2. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ |
|---------|-------------------|-------------|
| CPU usage | < 60% | > 80% |
| RAM usage | < 70% | > 90% |
| Disk usage | < 70% | > 85% |
| Queue depth (video) | < 10 | > 50 |
| Queue depth (stt) | < 20 | > 100 |
| API response time (p99) | < 500 –º—Å | > 2 —Å–µ–∫ |
| Error rate (5xx) | < 0.1% | > 1% |
| PostgreSQL connections | < 50 | > 80 |

---

## 10. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó

### 10.1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –∑–∞–∫–æ–Ω 152-–§–ó "–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö" —Ç—Ä–µ–±—É–µ—Ç:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω –†–§ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ–≥–ª–∞—Å–∏—è —Å—É–±—ä–µ–∫—Ç–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä–∞

### 10.2. –ö–∞–∫ –ö–ª–∏–ø–ú–µ–π–∫–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç 152-–§–ó

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-----------|-----------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –†–§ | VPS –Ω–∞ AdminVPS/HOSTKEY (–†–§) |
| –í–∏–¥–µ–æ—Ñ–∞–π–ª—ã –≤ –†–§ | S3 –Ω–∞ Cloud.ru / Yandex Object Storage |
| AI-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –†–§ | Cloud.ru (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è RU) |
| –°–æ–≥–ª–∞—Å–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –°–æ–≥–ª–∞—Å–∏–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ | TLS 1.3, AES-GCM 256-bit –¥–ª—è –∫–ª—é—á–µ–π |

### 10.3. Global-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ 152-–§–ó

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ Global-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
- –í–∏–¥–µ–æ—Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –†–§
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã (—Ç–µ–∫—Å—Ç, –±–µ–∑ PII) –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∑–∞ —Ä—É–±–µ–∂ –¥–ª—è AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

---

## üîÑ –û—Ç–ª–∏—á–∏—è Dev –∏ Prod —Å—Ä–µ–¥

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: Dev vs Prod

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Dev (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞) | Prod (–ø—Ä–æ–¥–∞–∫—à–Ω) |
|-----------|-----------------|-----------------|
| **S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** | MinIO (docker-compose, –ø–æ—Ä—Ç—ã 9000/9001) | Cloud.ru Evolution / Yandex Object Storage |
| **S3 endpoint** | `http://localhost:9000` | `https://s3.cloud.ru` –∏–ª–∏ `https://storage.yandexcloud.net` |
| **S3 credentials** | `minioadmin` / `minioadmin` | –†–µ–∞–ª—å–Ω—ã–µ access/secret –∫–ª—é—á–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ |
| **PostgreSQL** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø–æ—Ä—Ç `5432` –¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ö–æ—Å—Ç–∞ | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø–æ—Ä—Ç `127.0.0.1:5432` (—Ç–æ–ª—å–∫–æ Docker-—Å–µ—Ç—å) |
| **Redis** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø–æ—Ä—Ç `6379` –¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ö–æ—Å—Ç–∞ | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø–æ—Ä—Ç `127.0.0.1:6379` (—Ç–æ–ª—å–∫–æ Docker-—Å–µ—Ç—å) |
| **SMTP** | Ethereal (—Ñ–µ–π–∫–æ–≤—ã–π SMTP) | –†–µ–∞–ª—å–Ω—ã–π SMTP-—Å–µ—Ä–≤–µ—Ä (`SMTP_HOST`, `SMTP_PORT`) |
| **SSL/TLS** | –ù–µ—Ç (HTTP, `localhost:3000`) | Let's Encrypt, TLS 1.3, nginx reverse proxy |
| **nginx** | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (Next.js –Ω–∞–ø—Ä—è–º—É—é) | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω (SSL termination, –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| **DNS** | `localhost` | `clipmaker.ru` (A-–∑–∞–ø–∏—Å—å ‚Üí IP VPS) |

### Docker Compose: Dev-–ø—Ä–æ—Ñ–∏–ª—å vs Prod-–ø—Ä–æ—Ñ–∏–ª—å

**Dev (`docker-compose.yml`):**

```
+--------------------------------------------+
|  docker-compose.yml (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)           |
|                                            |
|  [web]  [stt] [llm] [video] [publish]     |
|  [postgres:5432]  [redis:6379]             |
|  [minio:9000/9001]  [minio-init]           |
|                                            |
|  Volumes: .:/app (live-reload)             |
|  –ü–æ—Ä—Ç—ã: –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ               |
|  Resource limits: –Ω–µ –∑–∞–¥–∞–Ω—ã                |
+--------------------------------------------+
```

**Prod (`docker-compose.prod.yml`):**

```
+--------------------------------------------+
|  docker-compose.prod.yml (–ø—Ä–æ–¥–∞–∫—à–Ω)        |
|                                            |
|  [web]  [stt] [llm] [video] [publish]     |
|  [postgres]  [redis]                       |
|  (MinIO –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –≤–Ω–µ—à–Ω–∏–π S3)          |
|                                            |
|  –ü–æ—Ä—Ç—ã: 127.0.0.1 only (—á–µ—Ä–µ–∑ nginx)      |
|  Resource limits:                          |
|    web: 2 GB, video: 4 GB + 2 CPU         |
|    postgres: 2 GB, publish: 512 MB        |
|  Restart: always                           |
+--------------------------------------------+
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Dev | Prod |
|----------|-----|------|
| **MinIO** | –í–∫–ª—é—á–µ–Ω –≤ docker-compose, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞ | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–≤–Ω–µ—à–Ω–∏–π S3-–ø—Ä–æ–≤–∞–π–¥–µ—Ä) |
| **–ü–∞—Ä–æ–ª—å PostgreSQL** | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: `clipmaker` | –ò–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `${POSTGRES_PASSWORD}` (–∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–π) |
| **Redis maxmemory** | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±–µ–∑ –ª–∏–º–∏—Ç–∞) | `512mb` + –ø–æ–ª–∏—Ç–∏–∫–∞ `allkeys-lru` |
| **Restart policy** | `unless-stopped` | `always` |
| **Volume mapping** | `.:/app` (–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è hot-reload) | –ù–µ—Ç (–∫–æ–¥ –≤—Å—Ç—Ä–æ–µ–Ω –≤ Docker-–æ–±—Ä–∞–∑ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ) |
| **Resource limits** | –ù–µ –∑–∞–¥–∞–Ω—ã (–≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Ö–æ—Å—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã) | –ñ—ë—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã –ø–æ CPU –∏ RAM –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

| –°—Ä–µ–¥–∞ | CPU | RAM | SSD | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-------|-----|-----|-----|-----------|
| **Dev (–ª–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞)** | 2+ —è–¥—Ä–∞ | 4+ –ì–ë | 20 –ì–ë | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| **Dev (Codespaces)** | 4 —è–¥—Ä–∞ | 8 –ì–ë | 32 –ì–ë | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Codespace |
| **Prod (MVP)** | 4 —è–¥—Ä–∞ | 8 –ì–ë | 100 –ì–ë | –î–æ 500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **Prod (—Ä–æ—Å—Ç)** | 8 —è–¥–µ—Ä | 16 –ì–ë | 250 –ì–ë | 500-2500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### MinIO (Dev) vs Cloud.ru/Yandex S3 (Prod)

| –ê—Å–ø–µ–∫—Ç | MinIO (Dev) | Cloud.ru / Yandex S3 (Prod) |
|--------|-------------|----------------------------|
| **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ** | Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ compose | –û–±–ª–∞—á–Ω—ã–π SaaS-—Å–µ—Ä–≤–∏—Å |
| **–ö–æ–Ω—Å–æ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** | `http://localhost:9001` | –í–µ–±-–∫–æ–Ω—Å–æ–ª—å Cloud.ru / Yandex Cloud |
| **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `minio-init` | –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ + –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CORS |
| **Presigned URLs** | –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ localhost (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è proxy) | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ |
| **–î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º** | `NEXT_PUBLIC_USE_S3_PROXY=true` | `NEXT_PUBLIC_USE_S3_PROXY=false` |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | 0 —Ä—É–±. (–ª–æ–∫–∞–ª—å–Ω–æ) | ~300 —Ä—É–±./–º–µ—Å –∑–∞ 100 –ì–ë |
| **SLA** | –ù–µ—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Docker) | 99.9% (–ø–æ SLA –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞) |
