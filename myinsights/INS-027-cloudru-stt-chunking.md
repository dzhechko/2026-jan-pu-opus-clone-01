# INS-027: Cloud.ru STT ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–µ —á–∞–Ω–∫–∏ –∏ json —Ñ–æ—Ä–º–∞—Ç

**Status:** üü¢ Active
**Hits:** 1
**Created:** 2026-02-27

## Error Signatures
- `verbose_json` —Ç–∞–π–º–∞—É—Ç –Ω–∞ Cloud.ru
- STT `Connection error`, `timeout` –Ω–∞ –±–æ–ª—å—à–∏—Ö —á–∞–Ω–∫–∞—Ö
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π STT, –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è 3 —Ä–∞–∑–∞

## –ü—Ä–æ–±–ª–µ–º–∞

Cloud.ru Whisper API –∏–º–µ–µ—Ç –¥–≤–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
1. **`verbose_json` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –∞ –≤–∏—Å–∏—Ç –¥–æ —Ç–∞–π–º–∞—É—Ç–∞ (~2 –º–∏–Ω), –ø–æ—Å–ª–µ —á–µ–≥–æ fallback –Ω–∞ `json` —Ç—Ä–∞—Ç–∏—Ç –µ—â—ë –≤—Ä–µ–º—è
2. **–ë–æ–ª—å—à–∏–µ —á–∞–Ω–∫–∏ (10 –º–∏–Ω, ~1.5MB MP3) –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã** ‚Äî —á–∞—Å—Ç—ã–µ —Ç–∞–π–º–∞—É—Ç—ã, Connection error, –º–µ–¥–ª–µ–Ω–Ω—ã–π upload –∏–∑ Codespace

## –†–µ—à–µ–Ω–∏–µ

1. **CHUNK_DURATION = 180** (3 –º–∏–Ω –≤–º–µ—Å—Ç–æ 10) ‚Üí —á–∞–Ω–∫–∏ ~450KB, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞ 20-40 —Å–µ–∫
2. **–°—Ä–∞–∑—É `json` –¥–ª—è `strategy === 'ru'`** ‚Äî –±–µ–∑ –ø–æ–ø—ã—Ç–∫–∏ `verbose_json`, —ç–∫–æ–Ω–æ–º–∏—Ç ~2 –º–∏–Ω/—á–∞–Ω–∫
3. **concurrency = 2** ‚Äî —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —á–∞–Ω–∫–∞–º–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã
- `apps/worker/lib/audio-chunker.ts` ‚Äî CHUNK_DURATION
- `apps/worker/workers/stt.ts` ‚Äî response_format –ª–æ–≥–∏–∫–∞, pMap concurrency

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- Cloud.ru `json` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ text }` –±–µ–∑ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ ‚Äî –∫–æ–¥ —Å–æ–∑–¥–∞—ë—Ç –æ–¥–∏–Ω —Å–µ–≥–º–µ–Ω—Ç –Ω–∞ –≤–µ—Å—å —á–∞–Ω–∫
- `verbose_json` (—Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏) —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è `global` (OpenAI API)
- –ü—Ä–∏ `json` —Ñ–æ—Ä–º–∞—Ç–µ confidence —Å—Ç–∞–≤–∏—Ç—Å—è 0.85 (—ç–≤—Ä–∏—Å—Ç–∏–∫–∞)
